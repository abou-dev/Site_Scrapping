{% load static %}
{% load i18n %}
<!DOCTYPE html>
<html lang="en">

<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}" />
   <title>Document</title>
   <style>
      body {
         background-color: rgb(228, 219, 219);
      }
   </style>
</head>

<body>
   <header>
      <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
         <a class="navbar-brand" href="#">Comparateur de téléphones portables</a>
         <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
            aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
         </button>
         <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ml-auto">
               <li class="nav-item active">
                  <a class="nav-link" href="{% url 'index' %}">Accueil</a>
               </li>
               <li class="nav-item">
                  <a class="nav-link" href="{% url 'marque' %}">Marques</a>
               </li>

               <li class="nav-item">
                  <a class="nav-link" href="#">A propos</a>
               </li>
               <li class="nav-item">
                  <a class="nav-link" href="#">Contact</a>
               </li>
            </ul>
            <form class="d-flex ml-2" role="search" method="GET" action="{% url 'index' %}">
               <input class="form-control me-2 mr-2" type="text" name="q"
                  placeholder="Rechercher des portables par nom ou marque" aria-label="Search">
               <button class="btn btn-outline-success" type="submit">Search</button>
            </form>
         </div>
      </nav>
   </header>
   <div class="container">
      <div class="row px-1 mt-4">
         <div class="col-md-3 px-2">
            <aside style="position: -webkit-sticky; position: sticky;top: 0;">
               <div class="list-group mt-3">
                  <a href="#" class="list-group-item fw-bold black-text list-group-item-action ">
                     <i class="bi bi-arrow-down-short"></i> Filtre par marque
                  </a>
                  {% for brand in brands%}
                  <a href="{% url 'marque' %}?marque={{brand}} " title="{{brand}}"
                     class="list-group-item list-group-item-action"><i class="bi bi-arrow-right-short"></i>
                     {{brand}}</a>
                  {%endfor%}
               </div>
            </aside>

         </div>
         <div class="col-md-9 px-2">
            <section>


               <div class="d-inline-block w-100">
                  <div class="row g-3">
                     {% for product in products%}
                     <div class="col-md-4 mb-3">

                        <div class="card border-0 shadow-sm">
                           <a href="{% url 'jewellery' %}?data={{ product.designation | urlencode }}"
                              class="img-fluid card-img-top rounded-top"><img src="{{product.image}}" width="220"
                                 height="220" alt="">
                           </a>
                           <div class="position-absolute badge bg-success">- 15 %</div>

                           <div class="card-body px-2 py-0 text-center">
                              <a href="{% url 'jewellery' %}?data={{ product.designation | urlencode }}"
                                 class="link-body-emphasis stretched-link d-block my-2 text-truncate text-decoration-none">
                                 {{product.designation}}
                              </a>
                              <div class="card-footer text-dark py-0 pb-3 bg-white border-0 fw-bold text-center fs-5">
                                 {{product.prix}}
                              </div>
                           </div>
                        </div>

                     </div>
                     {%endfor%}

                  </div>
                  <div class="pagination justify-content-center mt-3">
                     <!-- Ajoutez la classe 'justify-content-center' pour centrer la pagination -->
                     <ul class="pagination"> <!-- Utilisez la classe 'pagination' pour le conteneur de la pagination -->
                        {% if products.has_previous %}
                        <li class="page-item">
                           <!-- Utilisez la classe 'page-item' pour chaque élément de la pagination -->
                           <a href="?{%if search_query %}marque={{ search_query }}&{% endif %}page=1"
                              class="page-link">&laquo; first</a>
                           <!-- Utilisez la classe 'page-link' pour les liens de pagination -->
                        </li>
                        <li class="page-item">
                           <a href="?{%if search_query %}marque={{ search_query }}&{% endif %}page={{ products.previous_page_number }}"
                              class="page-link">previous</a>
                        </li>
                        {% endif %}

                        <li class="page-item disabled">
                           <!-- Utilisez la classe 'disabled' pour les éléments de pagination désactivés -->
                           <span class="page-link">
                              Page {{ products.number }} of {{ products.paginator.num_pages }}.
                           </span>
                        </li>

                        {% if products.has_next %}
                        <li class="page-item">
                           <a href="?{%if search_query %}marque={{ search_query }}&{% endif %}page={{ products.next_page_number }}"
                              class="page-link">next</a>
                        </li>
                        <li class="page-item">
                           <a href="?{%if search_query %}marque={{ search_query }}&{% endif %}page={{ products.paginator.num_pages }}"
                              class="page-link">&raquo; last</a>
                        </li>
                        {% endif %}
                     </ul>
                  </div>
               </div>
         </div>
      </div>
   </div>
   <footer class="bg-dark text-white text-center py-3 mt-2">
      <p>© 2023 Comparateur de téléphones portables. Tous droits réservés.</p>
   </footer>
</body>

</html>